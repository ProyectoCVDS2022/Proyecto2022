<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <style type = "text/css">

    .wrap-collabsible {
        margin-bottom: 1.2rem 0;
    }

    input[type='checkbox'] {
        display: none;
    }

    .lbl-toggle {
        display: block;

        font-weight: bold;
        font-family: monospace;
        font-size: 1.2rem;
        text-transform: uppercase;
        text-align: center;

        padding: 1rem;

        color: #FFFFFF;
        background: #ABABAB;

        cursor: pointer;

        border-radius: 7px;
        transition: all 0.25s ease-out;
    }

    .lbl-toggle:hover {
        color: #D8D8D8;
    }

    .lbl-toggle::before {
        content: ' ';
        display: inline-block;

        border-top: 5px solid transparent;
        border-bottom: 5px solid transparent;
        border-left: 5px solid currentColor;
        vertical-align: middle;
        margin-right: .7rem;
        transform: translateY(-2px);

        transition: transform .2s ease-out;
    }

    .toggle:checked + .lbl-toggle::before {
        transform: rotate(90deg) translateX(-3px);
    }

    .collapsible-content {
        max-height: 0px;
        overflow: hidden;
        transition: max-height .25s ease-in-out;
    }

    .toggle:checked + .lbl-toggle + .collapsible-content {
        max-height: 100%;
    }

    .toggle:checked + .lbl-toggle {
        border-bottom-right-radius: 0;
        border-bottom-left-radius: 0;
    }

    .collapsible-content .content-inner {
        background: rgba(150,150,150,0.4);
        border-bottom: 1px solid rgba(255, 255, 255, .45);
        border-bottom-left-radius: 7px;
        border-bottom-right-radius: 7px;
        padding: .5rem 1rem;
        justify-content: center;
        align-items: center;
        text-align: center;
    }

    .collapsible-content .content1-inner {
        background: rgba(150,150,150,0.4);
        border-bottom: 1px solid rgba(255, 255, 255, .45);
        border-bottom-left-radius: 7px;
        border-bottom-right-radius: 7px;
        padding: .5rem 1rem;
        justify-content: center;
        align-items: center;
        text-align: center;
    }

    .collapsible-content .content2-inner {
        background: rgba(150,150,150,0.4);
        border-bottom: 1px solid rgba(255, 255, 255, .45);
        border-bottom-left-radius: 7px;
        border-bottom-right-radius: 7px;
        padding: .5rem 1rem;
        justify-content: center;
        align-items: center;
        text-align: center;
    }

	body {
		width: 100%;
		height:100%;
		font-family: 'Candara';
		font-size: 24px;
		color: white;
        justify-content: center;
        align-items: center;
        text-align: center;
	}

	html {
        background: url(fondo.jpg) no-repeat center fixed;
        background-size: cover;
        overflow-y: scroll;
    }

	SELECT {
        color: #000000;
        font-size: 16px;
        margin: 0px 0px 7px 0px;
        padding: 4px 0px 4px 5px;
        width: 200px;
    }

    #main-header {
        background: #900;
        color: Red;
        height: 71px;
		font-family: Ubuntu,sans-serif;
        width: 100%;
        left: 0;
        top: 0;
        position: fixed;
    }

    #main-header a {
		color: white;
    }

    #logo-header {
        float: left;
        padding: 15px 0 0 20px;
        text-decoration: none;
    }

    #logo-header .site-name {
        font-size: 0.7em;
        position: absolute;
        top: 50%;
        right:0%;
        transform: translate(-50%, -50%);
    }

     .logo-image{
        width: 46px;
        height: 46px;
    }

     div.a {
        height: 230px;
		width: 100%;
		background-color: rgba(0,0,0,0.7);
        justify-content: center;
        align-items: center;
        text-align: center;
	}


</style>
</h:head>


    <h:body>
        <body>
        <header id="main-header">
            <div class="logo-image">
                <img src="eci logo.jpg"
                     style="object-fit:scale-down;
                                width:170px;
                                height:71px;"/>
            </div>
            <a id="logo-header" href="login.xhtml">
                <span class="site-name">Iniciar sesión</span>
            </a>
        </header>

        <br> </br>

        <div class="a">
            <h1>Público</h1>

            <p> En esta interfaz podrá consultar los recursos que actualmente ofrece la biblioteca para el </p>
            <p> servicio de la comunidad y la ocupación de los mismos. Para reservar alguno deberá iniciar sesión.</p>

        </div>


        <br> </br>

        <h:form id="buscar_recursos" prependId="false">

            <div class="wrap-collabsible">
                <input id="collapsible" class="toggle" type="checkbox"/>
                <label for="collapsible" class="lbl-toggle">Recursos</label>
                <div class="collapsible-content">
                    <div class="content-inner">

                        <h1>Consultar recursos</h1>

                        <p:inputText id="buscar" placeholder="Nombre del recurso" required="false" type="String" value="#{recursosBean.nombreBuscar}"/>

                        <br> </br>
                        <p:commandButton id="boton_buscar" value="Buscar" update="resultado" actionListener="#{recursosBean.buscarRecursos()}"/>
                        <br> </br>

                        <p:growl id="msg"/>

                        <p:dialog modal="true" resizable="false" header="Ocupación del recurso" widgetVar="dlg_ocupacion" showEffect="fold" hideEffect="clip">
                            <p:schedule id="schedule" value="#{CalendarView.eventModel}" widgetVar="myschedule" style="width:700px !important; height:800px !important;">

                            </p:schedule>
                        </p:dialog>

                        <p:dataTable id="resultado" var="recurso" rows="10" paginator="true"
                                     paginatorTemplate="{CurrentPageReport} {PreviousPageLink} {PageLinks} {NextPageLink} {RowsPerPageDropdown}"
                                     value="#{recursosBean.recursosEncontrados}" selectionPageOnly="false"
                                     paginatorPosition="bottom" scrollable="true">

                            <f:facet name="header">
                                <p:outputPanel>
                                    <h:selectOneMenu name="filtro" value="#{recursosBean.filtro}">
                                        <p:ajax event="change" listener="#{recursosBean.buscarRecursos}" update="resultado"/>
                                        <f:selectItem itemLabel="- Filtro -" itemValue="null" noSelectionOption="true"/>
                                        <f:selectItem itemValue = "1" itemLabel = "Mostrar todos" />
                                        <f:selectItem itemValue = "2" itemLabel = "Disponibles" />
                                        <f:selectItem itemValue = "3" itemLabel = "Libros" />
                                        <f:selectItem itemValue = "4" itemLabel = "Portatiles" />
                                        <f:selectItem itemValue = "5" itemLabel = "Computadores de escritorio" />
                                        <f:selectItem itemValue = "6" itemLabel = "Salas de estudio"/>
                                        <f:selectItem itemValue = "7" itemLabel = "Biblioteca Jorge Álvarez Lleras" />
                                        <f:selectItem itemValue = "8" itemLabel = "Biblioteca del edificio G" />
                                    </h:selectOneMenu>
                                </p:outputPanel>
                            </f:facet>

                            <p:column headerText="ID" style="text-align: center;">
                                <h:outputText value="#{recurso.id}" />
                            </p:column>
                            <p:column headerText="Nombre" style="text-align: center;">
                                <h:outputText value="#{recurso.nombre}" />
                            </p:column>
                            <p:column headerText="Capacidad" style="text-align: center;">
                                <h:outputText value="#{recurso.capacidad}" />
                            </p:column>
                            <p:column headerText="Hora de inicio" style="text-align: center;">
                                <h:outputText value="#{recurso.fechaInicio}" />
                            </p:column>
                            <p:column headerText="Hora de finalización" style="text-align: center;">
                                <h:outputText value="#{recurso.fechaFin}" />
                            </p:column>
                            <p:column headerText="Disponibilidad" style="text-align: center;">
                                <h:outputText value="#{recursosBean.estaDisponible(recurso.id)}" />
                            </p:column>
                            <p:column headerText="Observaciones" style="text-align: center;">
                                <h:outputText value="#{recurso.observaciones}" />
                            </p:column>
                            <p:column headerText="Tipo" style="text-align: center;">
                                <h:outputText value="#{recursosBean.nombreTipo(recurso.tipo).getNombre()}" />
                            </p:column>
                            <p:column headerText="Ubicación" style="text-align: center;">
                                <h:outputText value="#{recursosBean.nombreUbicacion(recurso.ubicacion).getLugar()}" />
                            </p:column>
                            <p:column headerText="Ocupación" style="width:3rem;text-align: center">
                                <p:commandButton action="#{CalendarView.crearCalendario}" oncomplete="PF('dlg_ocupacion').show()"
                                                 icon="pi pi-search" title="View"/>
                            </p:column>
                        </p:dataTable>
                    </div>
                </div>
            </div>
        </h:form>
        </body>
    </h:body>

</html>